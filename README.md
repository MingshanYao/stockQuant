# stockQuant

基于 Python 的 A 股量化交易框架，支持策略开发、历史回测、因子分析与模拟交易。数据来源于开源免费工具，零成本上手。

## 目录结构

```
├── stockquant/
│   ├── data/                  # 数据采集与管理
│   ├── indicators/            # 技术指标计算
│   ├── strategy/              # 策略开发框架
│   ├── backtest/              # 回测引擎
│   ├── risk/                  # 风控模块
│   ├── analysis/              # 绩效与因子分析
│   ├── visualization/         # 可视化
│   ├── trading/               # 模拟/实盘交易（可选）
│   ├── notify/                # 消息通知
│   └── utils/                 # 公共工具
├── config/
├── notebooks/                 # Jupyter 研究笔记
├── tests/                     # 单元测试
├── docs/                      # 文档
├── requirements.txt
└── README.md
```


## 🧩 功能模块

### 1. 数据采集与管理

行情数据（日K/分钟K）、财务数据、指数、龙虎榜、融资融券、板块数据等。支持复权处理、数据清洗、本地存储与增量更新。

**数据源：** AkShare（主） / BaoStock / Tushare

数据存储：DuckDB

* 模块实现要求
  * 从公开/免费的开源库中获取股票的日线数据，作为历史回测数据
    * 具有可配置性/灵活性
      * 可以指定股票池
      * 可以指定时间范围
      * 等其他方面的配置
    * 构建高效的本地数据库
      * 借助合适开源的数据库，
      * 高性能
      * 简洁/精简/适合个人开发使用
    * 数据需要完整，为以后的因子分析构建基础
    * 数据后处理
      * 比如数据缺失处理
      * 股价复权处理
      * 等等

```
python3 -m updater --mode all --start-date 2015-01-01 --end-date 2025-12-31
python3 -m updater --mode benchmark --start-date 2015-01-01 --end-date 2025-12-31
```

### 2. 技术指标计算

内置趋势、震荡、量价、波动率四大类常用指标，支持自定义指标扩展。底层基于 TA-Lib / pandas-ta。

### 3. 策略开发框架

提供 `BaseStrategy` 基类，用户继承后实现 `initialize` / `handle_bar` 即可。支持技术面、因子、事件驱动、机器学习等多种策略类型。

### 4. 回测引擎

事件驱动架构，完整模拟 A 股交易规则：

- T+1、涨跌停限制、100股整数倍、停牌/除权处理
- 佣金（万2.5）、印花税（千1）、滑点模拟
- 成交量约束、多标的并行回测

### 5. 绩效分析

收益指标（年化/Alpha/Beta）、风险指标（最大回撤/波动率/VaR）、风险调整收益（Sharpe/Sortino/Calmar）、交易统计（胜率/盈亏比/持仓天数）。

### 6. 风控模块

仓位控制、止盈止损（固定/移动/ATR）、风险预警（回撤熔断）、标的过滤（ST/次新/停牌/黑名单）。

### 7. 因子分析（进阶）

因子计算、IC/IR检验、分组回测、因子合成（等权/ICIR加权）、行业市值中性化。

### 8. 可视化

收益曲线、回撤图、月度热力图、K线买卖点标注、持仓分布、交互式仪表板。

### 9. 模拟/实盘交易（可选）

Paper Trading 模拟交易；实盘可对接 QMT / easytrader。

### 10. 基础设施

YAML 配置管理、日志系统、定时任务调度、消息通知（微信/邮件/钉钉）。

---

## 🛠️ 技术栈

| 类别     | 选型                            |
| -------- | ------------------------------- |
| 数据获取 | AkShare / BaoStock / Tushare    |
| 数据存储 | DuckDB                          |
| 指标计算 | TA-Lib / pandas-ta              |
| 核心计算 | Pandas / NumPy                  |
| 可视化   | Matplotlib / Plotly / Streamlit |
| 机器学习 | Scikit-learn / LightGBM（可选） |
| 任务调度 | APScheduler                     |

---

## 🗺️ 开发路线

| 阶段    | 内容                         | 周期   |
| ------- | ---------------------------- | ------ |
| Phase 1 | 数据采集、本地存储、技术指标 | 2-3 周 |
| Phase 2 | 策略框架、回测引擎、绩效分析 | 3-4 周 |
| Phase 3 | 风控模块、可视化、回测报告   | 2-3 周 |
| Phase 4 | 因子分析、参数优化           | 2-3 周 |
| Phase 5 | 模拟交易、通知推送、Web 界面 | 2-3 周 |
